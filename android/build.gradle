// apply plugin: "com.android.application"

// import com.android.build.OutputFile

apply plugin: 'com.android.library'

def safeExtGet(prop, fallback) {
	rootProject.ext.has(prop) ? rootProject.ext.get(prop) : fallback
}

project.ext.react = [
    entryFile: "index.js",
]

//apply from: "../../react-native/react.gradle"

buildscript {
	repositories {
		mavenLocal()
		jcenter()
		google()
		maven {
			url "$rootDir/../node_modules/react-native/android"
		}
	}

	dependencies {
		classpath 'com.android.tools.build:gradle:3.3.2'
	}
}

//android {
//    compileSdkVersion rootProject.ext.compileSdkVersion
//		buildToolsVersion rootProject.ext.buildToolsVersion
//    compileOptions {
//        sourceCompatibility JavaVersion.VERSION_1_8
//        targetCompatibility JavaVersion.VERSION_1_8
//    }
//
//    defaultConfig {
//        // applicationId "com.airship.customwebview"
//        minSdkVersion rootProject.ext.minSdkVersion
//        targetSdkVersion rootProject.ext.targetSdkVersion
//        versionCode 1
//        versionName "1.0"
//    }
//
//		lintOptions {
//        abortOnError false
//    }
//}

android {
	compileSdkVersion safeExtGet('compileSdkVersion', 27)
	buildToolsVersion safeExtGet('buildToolsVersion', '27.0.3')

	defaultConfig {
		minSdkVersion safeExtGet('minSdkVersion', 16)
		targetSdkVersion safeExtGet('targetSdkVersion', 26)
		versionCode 1
		versionName "1.0"
	}
	lintOptions {
		abortOnError false
	}
}


dependencies {
    // implementation fileTree(dir: "libs", include: ["*.jar"])
    implementation "com.facebook.react:react-native:+"  // From node_modules
}

allprojects {
	repositories {
		mavenLocal()
		jcenter()
		google()
		maven {
			// All of React Native (JS, Obj-C sources, Android binaries) is installed from npm
			url "$rootDir/../node_modules/react-native/android"
		}
	}
}

// Run this once to be able to run the application with BUCK
// puts all compile dependencies into folder libs for BUCK to use
// task copyDownloadableDepsToLibs(type: Copy) {
//     from configurations.compile
//     into 'libs'
// }

//apply from: file("../../@react-native-community/cli-platform-android/native_modules.gradle"); applyNativeModulesAppBuildGradle(project)
